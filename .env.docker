# ==============================================
# DOCKER SERVICES CONFIGURATION
# ==============================================

# ==============================================
# APPLICATION SETTINGS (PRODUCTION)
# ==============================================
NODE_ENV=production
APP_NAME=shopsifu
APP_DEBUG=false
APP_LOG_LEVEL=info
APP_CORS_ORIGINS=https://shopsifu.live,https://www.shopsifu.live,https://api.shopsifu.live,http://localhost:3000,http://localhost:3001

# ==============================================
# HTTP SERVER CONFIGURATION
# ==============================================
HTTP_HOST=0.0.0.0
HTTP_PORT=3000
HTTP_VERSIONING_ENABLE=true
HTTP_VERSION=1
SERVER_HEALTH_CHECK_PATH=/health
TZ=Asia/Ho_Chi_Minh
# Tối ưu heap Node.js cho server 30 cores - 95GB RAM
NODE_OPTIONS=--max-old-space-size=4096

# ==============================================
# AUTHENTICATION & JWT
# ==============================================
AUTH_ACCESS_TOKEN_SECRET="4Jq2K9zX8mW3nP7vL5tR1cY6bF2hQ8kN4xJ9pD3wE="
AUTH_ACCESS_TOKEN_EXP=1d
AUTH_REFRESH_TOKEN_SECRET="9pD3wE4Jq2K9zX8mW3nP7vL5tR1cY6bF2hQ8kN4xJ="
AUTH_REFRESH_TOKEN_EXP=7d
AUTH_OTP_EXP=5m

# ==============================================
# COOKIE CONFIGURATION (production domains)
# ==============================================
COOKIE_SECURE=false
COOKIE_ACCESS_TOKEN_PATH=/
COOKIE_ACCESS_TOKEN_DOMAIN=
COOKIE_REFRESH_TOKEN_PATH=/
COOKIE_REFRESH_TOKEN_DOMAIN=
COOKIE_CSRF_TOKEN_PATH=/
COOKIE_CSRF_TOKEN_DOMAIN=
COOKIE_CSRF_TOKEN_EXP=1h

# ==============================================
# ADMIN CONFIGURATION
# ==============================================
ADMIN_NAME="Super Admin"
ADMIN_PASSWORD="Shopsifu2025"
ADMIN_EMAIL="shopsifu.ecommerce@gmail.com"
ADMIN_PHONE_NUMBER=0123456789

# ==============================================
# DATABASE CONFIGURATION - DOCKER (internal network)
# ==============================================
POSTGRES_USER=shopsifu
POSTGRES_PASSWORD="Shopsifu2025"
POSTGRES_DB=shopsifu
POSTGRES_HOST=postgres
POSTGRES_PORT=5432

# App traffic đi qua PgBouncer (transaction mode) để tăng concurrency
DATABASE_URL=postgresql://shopsifu:Shopsifu2025@pgbouncer:6432/shopsifu?schema=public&pgbouncer=true
# Kết nối trực tiếp Postgres dành cho migrate/maintenance
DATABASE_DIRECT_URL=postgresql://shopsifu:Shopsifu2025@postgres:5432/shopsifu?schema=public

# ==============================================
# REDIS CONFIGURATION
# ==============================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=Shopsifu2025
REDIS_URL=redis://:Shopsifu2025@redis:6379
REDIS_ENABLE_TLS=false
REDIS_MAXMEMORY=20gb
REDIS_CONNECTION_NAME=shopsifu

# ==============================================
# GOOGLE AUTH CONFIGURATION
GOOGLE_CLIENT_ID='551696393503-8hj91f2hg1bbikgcudtgs2q076lp8g3u.apps.googleusercontent.com'
GOOGLE_CLIENT_SECRET='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'
GOOGLE_REDIRECT_URI=https://shopsifu.live/sso/google/callback
GOOGLE_REDIRECT_URI_GOOGLE_CALLBACK=https://api.shopsifu.live/auth/google/callback

# ==============================================
# PAYMENT API KEY CONFIGURATION
# ==============================================
PAYMENT_API_KEY="7pL4mZ9vN2xQ8kW3rT6yC1bJ5hF8nP9tD2wE4qK0x="

# ==============================================
# VNPAY CONFIGURATION (test)
# ==============================================
VNPAY_TMN_CODE=BZAITEST
VNPAY_SECURE_SECRET=XUGOW7WVUXMD130VLQ2D34JJIKIWP1EK

# ==============================================
# S3 CONFIGURATION
# ==============================================
S3_REGION=ap-southeast-1
S3_ACCESS_KEY=AKIA4IM3HQTJQCSUO3Y3
S3_SECRET_KEY=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
S3_BUCKET_NAME=shopsifu

# ==============================================
# RESEND API KEY CONFIGURATION
# ==============================================
RESEND_API_KEY=re_SxoEAFpx_ELpBAER2cyqVTwodwiJxqDsW

# ==============================================
# ERROR TRACKING - SENTRY
# ==============================================
SENTRY_DSN=https://00e2510ff69ebdf7e22bf56a5f2f07ab@o4509653612101632.ingest.us.sentry.io/4509653613346816

# ========================================
# ELASTICSEARCH CONFIGURATION
# ========================================
ELASTICSEARCH_NODE=http://elasticsearch:9200
ELASTICSEARCH_USERNAME=elastic
ELASTICSEARCH_PASSWORD=Shopsifu2025
ELASTICSEARCH_SSL_ENABLED=false
ELASTICSEARCH_INDEX_PRODUCTS=products
ELASTICSEARCH_HEAP_SIZE=16g
ELASTICSEARCH_NODE_NAME=es01
ELASTICSEARCH_CLUSTER_NAME=shopsifu-cluster
ELASTICSEARCH_DISCOVERY_TYPE=single-node

# ========================================
# MONITORING CONFIGURATION
# ========================================
PROMETHEUS_PORT=9090
PROMETHEUS_RETENTION_DAYS=30
PROMETHEUS_WEB_ENABLE_LIFECYCLE=true
PROMETHEUS_WEB_ENABLE_ADMIN_API=true
PROMETHEUS_WEB_ENABLE_TELEMETRY=false

GRAFANA_PORT=3001
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=Shopsifu2025
GRAFANA_ALLOW_SIGNUP=false
GRAFANA_ANONYMOUS_ENABLED=false
GRAFANA_SERVER_HTTP_PORT=3000
GRAFANA_SECURITY_DISABLE_GRAVATAR=true
GRAFANA_SECURITY_COOKIE_SECURE=false
GRAFANA_SECURITY_COOKIE_HTTPONLY=true

KIBANA_PORT=5601
KIBANA_SERVER_NAME=kibana
KIBANA_ELASTICSEARCH_HOSTS=http://elasticsearch:9200
KIBANA_ELASTICSEARCH_USERNAME=kibana_system
KIBANA_SERVER_SSL_ENABLED=false
KIBANA_XPACK_SECURITY_ENABLED=true

PGBOUNCER_PORT=6432

# ========================================
# PM2 RUNTIME CONFIGURATION (OPTIMIZED FOR 30 CORES)
# ========================================
# Tối ưu cho server 30 cores - 95GB RAM
PM2_INSTANCES=30
PM2_MAX_MEM=3000M
